---
top_domain: stage.queer.haus

setups:
  traefik:
    run_dir: /opt/queerhaus/traefik
    data_dir: /opt/queerhaus/traefik/data
    backup_dir: /opt/queerhaus/traefik/backup
    restore_dir: /opt/queerhaus/traefik/restore
    config:
      username: admin
      password: "{{ vault_traefik_admin_password }}"
      email: queerhaus+stage@protonmail.com
  collective:
    run_dir: /opt/queerhaus/collective
    data_dir: /opt/queerhaus/collective/data
    backup_dir: /opt/queerhaus/collective/backup
    restore_dir: /opt/queerhaus/collective/restore
    deploy:
      command: "set -x; cd /opt/queerhaus/collective && docker-compose pull && docker-compose up -d"
      public_key: "{{ vault_collective.deploy_public_key}}"
    config:
      docker_image: docker.pkg.github.com/queerhaus/collective/collective:main
  hometown:
    run_dir: /opt/queerhaus/hometown
    data_dir: /opt/queerhaus/hometown/data
    backup_dir: /opt/queerhaus/hometown/backup
    restore_dir: /opt/queerhaus/hometown/restore
    config:
      docker_image: docker.pkg.github.com/queerhaus/hometown/hometown:develop
      secret_key_base: "{{ vault_hometown.secret_key_base }}"
      otp_secret: "{{ vault_hometown.otp_secret }}"
      vapid_private_key: "{{ vault_hometown.vapid_private_key }}"
      vapid_public_key: "{{ vault_hometown.vapid_public_key }}"
  codimd:
    run_dir: /opt/queerhaus/codimd
    data_dir: /opt/queerhaus/codimd/data
    backup_dir: /opt/queerhaus/codimd/backup
    restore_dir: /opt/queerhaus/codimd/restore
  nextcloud:
    run_dir: /opt/queerhaus/nextcloud
    data_dir: /opt/queerhaus/nextcloud/data
    backup_dir: /opt/queerhaus/nextcloud/backup
    restore_dir: /opt/queerhaus/nextcloud/restore
    config:
      mysql_root_password: "{{ vault_nextcloud_mysql_root_password }}"
      mysql_password: "{{ vault_nextcloud_mysql_password }}"
      onlyoffice_secret: "{{ vault_onlyoffice_secret }}"
